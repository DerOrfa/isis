# -*- mode: cmake -*-
# ISIS cmake configuration file
#

get_filename_component(ISIS_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
include(CMakeFindDependencyMacro)

find_dependency(Boost 1.55 REQUIRED COMPONENTS regex)

set(ISIS_RUNTIME_LOG @ISIS_RUNTIME_LOG@ CACHE BOOL "Enable runtime logging through isis (note this only has an effect on your compile, not of the isis libraries)")
set(ISIS_DEBUG_LOG @ISIS_DEBUG_LOG@ CACHE BOOL "Enable debug logging through isis (note this only has an effect on your compile, not of the isis libraries)")

# enable RUNTIME_LOG
if(ISIS_RUNTIME_LOG)
  add_definitions(-D_ENABLE_LOG=1)
else()
  add_definitions(-D_ENABLE_LOG=0)
endif()

# enable DEBUG_LOG
if(ISIS_DEBUG_LOG)
  add_definitions(-D_ENABLE_DEBUG=1)
  message(STATUS "Debug code enabled, this will will have a big impact on the performance")
else()
  add_definitions(-D_ENABLE_DEBUG=0)
endif()

if(NOT TARGET ISIS::isis_core-SHARED OR NOT TARGET ISIS::isis_core-STATIC)
    include("${ISIS_CMAKE_DIR}/ISISTargets.cmake")
endif()

if(NOT ISIS_FIND_COMPONENTS)
    message(STATUS "No additional components defined. Options are: Math Qt")
endif()

option(ISIS_STATIC_LIBS "Try to link the isis libraries statically" OFF)

if(${ISIS_STATIC_LIBS})
  if(TARGET ISIS::isis_qt5-STATIC)


##add_library(<name> ALIAS <target>)

if(Qt IN_LIST ${ISIS_FIND_COMPONENTS})
    if(TARGET ISIS::isis_adapter_qt5-SHARED OR TARGET ISIS::isis_adapter_qt5-STATIC)
        message(STATUS "Adding support for Qt5")
        find_package(Qt5Widgets)
    else()
        message(ERROR "You requested support for ISIS::Qt5 but it not part of this installation")
        message(ERROR "Please build ISIS again with Qt5  support")
    endif()
endif()

if(Math IN_LIST ${ISIS_FIND_COMPONENTS})
    if(TARGET ISIS::isis_math-SHARED OR TARGET ISIS::isis_math-STATIC)
        message(STATUS "Adding support for ISIS::Math")
    else()
        message(ERROR "You requested support for Qt5 but it not part of this installation")
        message(ERROR "Please build ISIS again with Qt5  support")
    endif()
endif()