#!/bin/bash

TMPROOT=@CMAKE_BINARY_DIR@
PACKAGE=libisiscore0
TMPDIR=${TMPROOT}/rpm
FILES="../CMakeLists.txt ../DataStorage/ ../CoreUtils/ ../cmake/"
VERSION=@ISIS_CORE_VERSION@

# create temporary directories
if [ -d ${TMPDIR} ];then
    echo "Old temporary directory found. Removing content."
    rm -rf ${TMPDIR}
fi

mkdir ${TMPDIR}
mkdir ${TMPDIR}/BUILD
mkdir ${TMPDIR}/RPMS
mkdir ${TMPDIR}/SOURCES
mkdir ${TMPDIR}/SRPMS
mkdir ${TMPDIR}/SPECS

# create source archive and copy it to temp. directory
tar -czf ${TMPDIR}/SOURCES/libisiscore0-${VERSION}.tar.gz ${FILES}

# copy spec file
cp ${PACKAGE}.spec ${TMPDIR}/SPECS

# build rpm package
# cd ${TMPDIR}
# rpmbuild -v -bb SPECS/${PACKAGE}.spec

